<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>2.4. Basic usage &#8212; HΦ Documentation 3.5.1 documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b76e3c8a" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css?v=66c3864b" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js?v=473478d8"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=4825356b"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="3. Tutorial" href="../tutorial/tu-index.html" />
    <link rel="prev" title="2.3. Directory structure" href="directorystructure_en.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="basic-usage">
<h1><span class="section-number">2.4. </span>Basic usage<a class="headerlink" href="#basic-usage" title="Permalink to this heading">¶</a></h1>
<p><span class="math notranslate nohighlight">\({\mathcal H}\Phi\)</span> has two modes: Standard mode and Expert mode. Here, the basic flows of calculations of the Standard and expert modes are shown.</p>
<section id="standard-mode">
<h2><span class="section-number">2.4.1. </span><em>Standard</em> mode<a class="headerlink" href="#standard-mode" title="Permalink to this heading">¶</a></h2>
<p>The procedure of calculation through the standard mode is as follows:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>Create a directory for a calculation scenario</p></li>
</ol>
<blockquote>
<div><p>First, you create a working directory for the calculation.</p>
</div></blockquote>
<ol class="arabic simple" start="2">
<li><p>Create input files for Standard mode</p></li>
</ol>
<blockquote>
<div><p>In Standard mode, you can choose a model (the Heisenberg model, Hubbard model, etc.) and a lattice (the square lattice, triangular lattice, etc.) from those provided; you can specify some parameters (such as the first/second nearest neighbor hopping integrals and the on-site Coulomb integral) for them. Finally, you have to specify the numerical method (such as the Lanczos method) employed in this calculation. The input file format is described in <a class="reference internal" href="prerequisite_en.html#ch-prerequisite"><span class="std std-ref">How to use HPhi</span></a>.</p>
</div></blockquote>
<ol class="arabic simple" start="3">
<li><p>Run</p></li>
</ol>
<blockquote>
<div><p>Run an executable <code class="docutils literal notranslate"><span class="pre">HPhi</span></code> in the terminal by setting option &quot;<code class="docutils literal notranslate"><span class="pre">-s</span></code>&quot; (or &quot;<code class="docutils literal notranslate"><span class="pre">--standard</span></code>&quot;) and the name of the input file written in the previous step.</p>
<blockquote>
<div><ul class="simple">
<li><p>Serial/OpenMP parallel</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">$</span> <span class="pre">Path</span> <span class="pre">/HPhi</span> <span class="pre">-s</span> <span class="pre">Input_file_name</span></code></p>
<ul class="simple">
<li><p>MPI parallel/ Hybrid parallel</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">$</span> <span class="pre">mpiexec</span> <span class="pre">-np</span> <span class="pre">number_of_processes</span> <span class="pre">Path</span> <span class="pre">/HPhi</span> <span class="pre">-s</span> <span class="pre">Input_file_name</span></code></p>
</div></blockquote>
<p>When you use a queuing system in workstations or super computers, sometimes the number of processes is specified as an argument for the job-submitting command. If you need more information, please refer to your system manuals. The number of processes depends on the target system of the models. The details of setting the number of processes are shown in <a class="reference internal" href="#subsec-creatingexpert"><span class="std std-ref">Creating input files for Expert mode</span></a> .</p>
</div></blockquote>
<ol class="arabic simple" start="4">
<li><p>Watch calculation logs</p></li>
</ol>
<blockquote>
<div><p>Log files are outputted in the &quot;output&quot; folder, which is automatically created in the directory for a calculation scenario. The details of the output files are shown in <a class="reference internal" href="../filespecification/outputfiles_en/index_outputfiles_en.html#sec-outputfile"><span class="std std-ref">Output files</span></a> .</p>
</div></blockquote>
<ol class="arabic simple" start="5">
<li><p>Results</p></li>
</ol>
<blockquote>
<div><p>If the calculation is completed normally, the result files are outputted in  the &quot;output&quot; folder. The details of the output files are shown in <a class="reference internal" href="../filespecification/outputfiles_en/index_outputfiles_en.html#sec-outputfile"><span class="std std-ref">Output files</span></a></p>
</div></blockquote>
</div></blockquote>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<div class="line-block">
<div class="line"><strong>The number of threads for OpenMP</strong></div>
<div class="line">If you specify the number of OpenMP threads for <span class="math notranslate nohighlight">\({\mathcal H}\Phi\)</span>, you should set it as follows (in the case of 16 threads) before running:</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">export</span> <span class="pre">OMP_NUM_THREADS=16</span></code></div>
</div>
</div>
</section>
<section id="expert-mode">
<h2><span class="section-number">2.4.2. </span><em>Expert</em> mode<a class="headerlink" href="#expert-mode" title="Permalink to this heading">¶</a></h2>
<dl>
<dt>The calculation procedure for Expert mode is as follows.</dt><dd><ol class="arabic simple">
<li><p>Create a directory for a calculation scenario</p></li>
</ol>
<blockquote>
<div><p>First, you create a directory and give it the name of a calculation scenario (you can attach an arbitrary name to a directory).</p>
</div></blockquote>
<ol class="arabic simple" start="2">
<li><p>Create input files for Expert mode</p></li>
</ol>
<blockquote>
<div><p>For Expert mode, you should create input files for constructing Hamiltonian operators, calculation conditions, and a list file for the filenames of the input files (see the file formats shown in <a class="reference internal" href="../filespecification/expertmode_en/index_expertmode_en.html#ch-howtoexpert"><span class="std std-ref">Input files for Expert mode</span></a>).</p>
</div></blockquote>
<div class="admonition note">
<p class="admonition-title">Note</p>
<div class="line-block">
<div class="line">A list file can be easily created by using Standard mode.</div>
</div>
</div>
<ol class="arabic simple" start="3">
<li><p>Run</p></li>
</ol>
<blockquote>
<div><p>Run <span class="math notranslate nohighlight">\({\mathcal H}\Phi\)</span> in the terminal by setting option &quot;<code class="docutils literal notranslate"><span class="pre">-e</span></code>&quot; (or &quot;<code class="docutils literal notranslate"><span class="pre">--expert</span></code>&quot;) and the file name of a list file.</p>
<blockquote>
<div><ul class="simple">
<li><p>Serial/OpenMP</p></li>
</ul>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">$</span> <span class="pre">Path/HPhi</span> <span class="pre">-e</span> <span class="pre">Input_List_file\_name</span></code></p>
</div></blockquote>
<ul class="simple">
<li><p>MPI/Hybrid</p></li>
</ul>
<blockquote>
<div><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">$</span> <span class="pre">mpiexec</span> <span class="pre">-np</span> <span class="pre">number_of_processes</span> <span class="pre">Path/HPhi</span> <span class="pre">-e</span> <span class="pre">Input_List_file_name</span></code></div>
<div class="line">A number of processes depend on a target of system for models. The details of setting a number of processes are shown in <a class="reference internal" href="#subsec-creatingexpert"><span class="std std-ref">Creating input files for Expert mode</span></a>.</div>
</div>
</div></blockquote>
</div></blockquote>
</div></blockquote>
<ol class="arabic simple" start="4">
<li><p>While running</p></li>
</ol>
<blockquote>
<div><p>Log files are outputted in the &quot;output&quot; folder which is automatically created in the directory for a calculation scenario. The details of the output files are shown in <a class="reference internal" href="../filespecification/outputfiles_en/index_outputfiles_en.html#sec-outputfile"><span class="std std-ref">Output files</span></a>.</p>
</div></blockquote>
<ol class="arabic simple" start="5">
<li><p>Results</p></li>
</ol>
<blockquote>
<div><p>If the calculation is finished normally, the result files are outputted in the &quot;output&quot; folder. The details of the output files are shown in <a class="reference internal" href="../filespecification/outputfiles_en/index_outputfiles_en.html#sec-outputfile"><span class="std std-ref">Output files</span></a>.</p>
</div></blockquote>
</dd>
</dl>
</section>
<section id="creating-input-files-for-expert-mode">
<span id="subsec-creatingexpert"></span><h2><span class="section-number">2.4.3. </span>Creating input files for <em>Expert</em> mode<a class="headerlink" href="#creating-input-files-for-expert-mode" title="Permalink to this heading">¶</a></h2>
<p>This mode is for creating input files for <em>Expert</em> mode.
A set of input files created using this mode gives a model provided in <em>Standard</em> mode.
The usage is shown as follows.</p>
<blockquote>
<div><ol class="arabic">
<li><p>Create an input file for <em>Standard</em> mode.</p></li>
<li><p>Setting an option &quot;-sdry&quot; and an input file (in this example, StdFace.def), run <span class="math notranslate nohighlight">\({\mathcal H}\Phi\)</span>.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ Path/HPhi -sdry StdFace.def
</pre></div>
</div>
<p>In this case, you should not use MPI parallelization (mpirun, mpiexec, etc.).</p>
</li>
<li><p>The following files are created as the input files for <em>Expert</em> mode in the current working directory.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>calcmod.def   greentwo.def  namelist.def  zTrans.def
greenone.def  modpara.def   zInterAll.def zlocspn.def
</pre></div>
</div>
</li>
</ol>
</div></blockquote>
</section>
<section id="setting-the-process-number-for-mpi-hybrid-parallelization">
<span id="subsec-process"></span><h2><span class="section-number">2.4.4. </span>Setting the process number for MPI/hybrid parallelization<a class="headerlink" href="#setting-the-process-number-for-mpi-hybrid-parallelization" title="Permalink to this heading">¶</a></h2>
<p>For using MPI/hybrid parallelization, the process number must be set as follows.</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>Standard mode</p></li>
</ol>
<blockquote>
<div><ul class="simple">
<li><p>Hubbard/Kondo model</p></li>
</ul>
<blockquote>
<div><p>When <code class="docutils literal notranslate"><span class="pre">model</span></code> in the input file for Standard mode is set as <code class="docutils literal notranslate"><span class="pre">&quot;Fermion</span> <span class="pre">Hubbard&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;Kondo</span> <span class="pre">Lattice&quot;</span></code>, or <code class="docutils literal notranslate"><span class="pre">&quot;Fermion</span> <span class="pre">HubbardGC&quot;</span></code>, the process number must be equal to <span class="math notranslate nohighlight">\(4^n\)</span>.</p>
</div></blockquote>
<ul class="simple">
<li><p>Spin model</p></li>
</ul>
<blockquote>
<div><p>When <code class="docutils literal notranslate"><span class="pre">model</span></code> in the input file for Standard mode is set as <code class="docutils literal notranslate"><span class="pre">&quot;Spin&quot;</span></code> or <code class="docutils literal notranslate"><span class="pre">&quot;SpinGC&quot;</span></code>, the process number must be equal to <span class="math notranslate nohighlight">\((2S+1)^n\)</span>, where <code class="docutils literal notranslate"><span class="pre">2S</span></code> is set in the input file (the default value is <span class="math notranslate nohighlight">\(1\)</span>).</p>
</div></blockquote>
</div></blockquote>
<ol class="arabic simple" start="2">
<li><p>Expert mode</p></li>
</ol>
<blockquote>
<div><ul class="simple">
<li><p>Hubbard/Kondo model</p></li>
</ul>
<blockquote>
<div><p>When the model is selected as the Fermion Hubbard model or Kondo model by setting <code class="docutils literal notranslate"><span class="pre">CalcModel</span></code> in a <strong>CalcMod</strong> file, the process number must be equal to <span class="math notranslate nohighlight">\(4^n\)</span>. See <a class="reference internal" href="../filespecification/expertmode_en/CalcMod_file_en.html#subsec-calcmod"><span class="std std-ref">CalcMod file</span></a> for details of the <code class="docutils literal notranslate"><span class="pre">CalcModel</span></code> file.</p>
</div></blockquote>
<ul class="simple">
<li><p>Spin model</p></li>
</ul>
<blockquote>
<div><p>When the model is selected as the spin model by setting <code class="docutils literal notranslate"><span class="pre">CalcModel</span></code> in a <strong>CalcMod</strong> file, the process number is fixed by a <strong>LocSpin</strong> file. The process number must be equal to the number calculated by multiplying the state number of the localized spin (<code class="docutils literal notranslate"><span class="pre">2S</span></code> +1) in descending order by the site number. See <a class="reference internal" href="../filespecification/expertmode_en/LocSpin_file_en.html#subsec-locspn"><span class="std std-ref">LocSpin file</span></a> for details of the <strong>LocSpin</strong> file.</p>
<p>For example, when a <strong>LocSpin</strong> file is given as follows, the process number must be equal to <span class="math notranslate nohighlight">\(2=1+1,~6=2\times(2+1),~24=6\times(3+1)\)</span>.</p>
</div></blockquote>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>================================
NlocalSpin     3
================================
========i_0IteElc_2S ======
================================
    0      3
    1      2
    2      1
</pre></div>
</div>
</div></blockquote>
</div></blockquote>
</section>
<section id="printing-version-id">
<h2><span class="section-number">2.4.5. </span>Printing version ID<a class="headerlink" href="#printing-version-id" title="Permalink to this heading">¶</a></h2>
<p>By using the <code class="docutils literal notranslate"><span class="pre">-v</span></code> option as follows, you can check which version of <span class="math notranslate nohighlight">\({\mathcal H}\Phi\)</span> you are using.</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">$</span> <span class="pre">PATH/HPhi</span> <span class="pre">-v</span></code></p>
</div></blockquote>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<p class="logo">
  <a href="../index.html">
    <img class="logo" src="../_static/logo_HPhi.png" alt="Logo"/>
    
  </a>
</p>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction_en.html">1. What is <span class="math notranslate nohighlight">\({\mathcal H}\Phi\)</span>?</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="ho-index.html">2. How to use <span class="math notranslate nohighlight">\({\mathcal H}\Phi\)</span></a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="prerequisite_en.html">2.1. Prerequisite</a></li>
<li class="toctree-l2"><a class="reference internal" href="installation_en.html">2.2. Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="directorystructure_en.html">2.3. Directory structure</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">2.4. Basic usage</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#standard-mode">2.4.1. <em>Standard</em> mode</a></li>
<li class="toctree-l3"><a class="reference internal" href="#expert-mode">2.4.2. <em>Expert</em> mode</a></li>
<li class="toctree-l3"><a class="reference internal" href="#creating-input-files-for-expert-mode">2.4.3. Creating input files for <em>Expert</em> mode</a></li>
<li class="toctree-l3"><a class="reference internal" href="#setting-the-process-number-for-mpi-hybrid-parallelization">2.4.4. Setting the process number for MPI/hybrid parallelization</a></li>
<li class="toctree-l3"><a class="reference internal" href="#printing-version-id">2.4.5. Printing version ID</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/tu-index.html">3. Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../filespecification/fi-index.html">4. File specification</a></li>
<li class="toctree-l1"><a class="reference internal" href="../algorithm/al-index.html">5. Algorithm</a></li>
<li class="toctree-l1"><a class="reference internal" href="../acknowledgement_en.html">6. Acknowledgement</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fourier/index.html">7. HPhi/mVMC Fourier-Transformation utility</a></li>
<li class="toctree-l1"><a class="reference internal" href="../wannier/index.html">8. Downfolding with Wannier functions</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  <li><a href="ho-index.html"><span class="section-number">2. </span>How to use <span class="math notranslate nohighlight">\({\mathcal H}\Phi\)</span></a><ul>
      <li>Previous: <a href="directorystructure_en.html" title="previous chapter"><span class="section-number">2.3. </span>Directory structure</a></li>
      <li>Next: <a href="../tutorial/tu-index.html" title="next chapter"><span class="section-number">3. </span>Tutorial</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2022, The University of Tokyo.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 7.1.0</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.13</a>
      
      |
      <a href="../_sources/howtouse/basicusage_en.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>